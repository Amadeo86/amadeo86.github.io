---
export interface Props {
  proyecto: {
    id: number;
    categoria: string;
    title: string;
    description: string;
    image: string;
    href: string;
    technologies: string[];
    featured?: boolean;
  };
}

const { proyecto } = Astro.props;
---

<article
  class={`group overflow-hidden rounded-lg border transition-all duration-300 ${
    proyecto.featured
      ? "border-green-500 dark:border-green-400 shadow-lg hover:shadow-2xl"
      : "border-neutral-200 dark:border-neutral-700 hover:shadow-lg"
  } bg-white dark:bg-neutral-800 hover:scale-105`}
>
  <!-- Imagen -->
  <div class="relative overflow-hidden bg-neutral-200 dark:bg-neutral-700 h-48">
    <img
      src={proyecto.image}
      alt={proyecto.title}
      class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
    />
    <div
      class="absolute top-3 left-3 bg-neutral-900 dark:bg-neutral-100 text-white dark:text-neutral-900 px-3 py-1 rounded-full text-xs font-medium"
    >
      {proyecto.categoria}
    </div>
    {
      proyecto.featured && (
        <div class="absolute top-3 right-3 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold">
          ⭐ Destacado
        </div>
      )
    }
  </div>

  <!-- Contenido -->
  <div class="p-6">
    <h3
      class="text-xl font-bold text-neutral-900 dark:text-neutral-100 mb-2 line-clamp-2"
    >
      {proyecto.title}
    </h3>

    <p class="text-sm text-neutral-600 dark:text-neutral-400 mb-4 line-clamp-3">
      {proyecto.description}
    </p>

    <!-- Tags de tecnologías -->
    <div class="flex flex-wrap gap-2 mb-4">
      {
        proyecto.technologies.slice(0, 3).map((tech) => (
          <span class="inline-block bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 text-xs font-semibold px-3 py-1 rounded-full">
            {tech}
          </span>
        ))
      }
      {
        proyecto.technologies.length > 3 && (
          <span class="inline-block bg-neutral-100 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 text-xs font-semibold px-3 py-1 rounded-full">
            +{proyecto.technologies.length - 3} más
          </span>
        )
      }
    </div>

    <!-- Botón -->
    <a
      href={proyecto.href}
      class="inline-flex items-center gap-2 text-sm font-semibold text-neutral-900 dark:text-neutral-100 hover:text-green-600 dark:hover:text-green-400 transition-colors"
    >
      Ver detalles →
    </a>
  </div>
</article>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
