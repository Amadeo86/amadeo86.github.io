---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getAllPosts, getPostBySlug } from "../utils/getPosts";

const allPosts = getAllPosts();
const sortedPosts = allPosts.sort(
  (a, b) =>
    new Date(b.date).getTime() -
    new Date(a.date).getTime()
);

// Enriquecer posts con información adicional del frontmatter
const enrichedPosts = sortedPosts.map((post) => {
  const fullPost = getPostBySlug(post.slug);
  return {
    ...post,
    category: fullPost?.frontmatter.category || "Sin categoría",
    tags: fullPost?.frontmatter.tags || [],
    author: fullPost?.frontmatter.author || "Ramón Amadeo",
  };
});

---

<head>
  <meta http-equiv="refresh" content="0; url=/posts/" />
  <meta name="robots" content="noindex" />
  <script>location.replace('/posts/');</script>
</head>

<body>
  <p>Redirigiendo a <a href="/posts/">/posts/</a>…</p>
</body>
);
